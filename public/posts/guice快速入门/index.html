<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Guiceå¿«é€Ÿå…¥é—¨ | Go Data</title>

<meta name="keywords" content="" />
<meta name="description" content="Guiceå¿«é€Ÿå…¥é—¨ æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨kotlin&#43;vert.xæ¥å†™çš„ï¼Œä½¿ç”¨gradleæ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº†guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚
guiceæ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶springä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯springå¤ªåºå¤§äº†ã€‚
1 åŸºæœ¬ä½¿ç”¨ å¼•å…¥ä¾èµ– ä½¿ç”¨gradleæˆ–è€…mavenï¼Œå¼•å…¥guiceã€‚
maven:
&lt;dependency&gt; &lt;groupId&gt;com.google.inject&lt;/groupId&gt; &lt;artifactId&gt;guice&lt;/artifactId&gt; &lt;version&gt;4.1.0&lt;/version&gt; &lt;/dependency&gt; Gradle:
compile &quot;com.google.inject:guice:4.1.0&quot; é¡¹ç›®éª¨æ¶ é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š
package com.learning.guice; public interface UserService { void process(); } package com.learning.guice; public class UserServiceImpl implements UserService { @Override public void process() { System.out.println(&quot;æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘&quot;); } } ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š
package com.learning.guice; public interface LogService { void log(String msg); } package com.learning.guice; public class LogServiceImpl implements LogService { @Override public void log(String msg) { System.out.println(&quot;------LOG: &quot; &#43; msg); } } æœ€åæ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£å’Œç›¸åº”çš„å®ç°ï¼Œåœ¨å®ç°ä¸­ä½¿ç”¨äº†ä¸šåŠ¡æ¥å£å’Œæ—¥å¿—æ¥å£å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š">
<meta name="author" content="Lucas">
<link rel="canonical" href="https://zhenfeng-zhu.github.io/posts/guice%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" />
<link href="/assets/css/stylesheet.min.3839cf02b87f30309470412461116907caabd1b3ec3f5d015df618da2d034992.css" integrity="sha256-ODnPArh/MDCUcEEkYRFpB8qr0bPsP10BXfYY2i0DSZI=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://zhenfeng-zhu.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://zhenfeng-zhu.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://zhenfeng-zhu.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://zhenfeng-zhu.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://zhenfeng-zhu.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.80.0" />


<meta property="og:title" content="Guiceå¿«é€Ÿå…¥é—¨" />
<meta property="og:description" content="Guiceå¿«é€Ÿå…¥é—¨ æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨kotlin&#43;vert.xæ¥å†™çš„ï¼Œä½¿ç”¨gradleæ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº†guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚
guiceæ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶springä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯springå¤ªåºå¤§äº†ã€‚
1 åŸºæœ¬ä½¿ç”¨ å¼•å…¥ä¾èµ– ä½¿ç”¨gradleæˆ–è€…mavenï¼Œå¼•å…¥guiceã€‚
maven:
&lt;dependency&gt; &lt;groupId&gt;com.google.inject&lt;/groupId&gt; &lt;artifactId&gt;guice&lt;/artifactId&gt; &lt;version&gt;4.1.0&lt;/version&gt; &lt;/dependency&gt; Gradle:
compile &quot;com.google.inject:guice:4.1.0&quot; é¡¹ç›®éª¨æ¶ é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š
package com.learning.guice; public interface UserService { void process(); } package com.learning.guice; public class UserServiceImpl implements UserService { @Override public void process() { System.out.println(&quot;æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘&quot;); } } ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š
package com.learning.guice; public interface LogService { void log(String msg); } package com.learning.guice; public class LogServiceImpl implements LogService { @Override public void log(String msg) { System.out.println(&quot;------LOG: &quot; &#43; msg); } } æœ€åæ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£å’Œç›¸åº”çš„å®ç°ï¼Œåœ¨å®ç°ä¸­ä½¿ç”¨äº†ä¸šåŠ¡æ¥å£å’Œæ—¥å¿—æ¥å£å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhenfeng-zhu.github.io/posts/guice%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" />
<meta property="og:image" content="https://zhenfeng-zhu.github.io/papermod-cover.png"/>
<meta property="article:published_time" content="2018-03-24T17:57:15+00:00" />
<meta property="article:modified_time" content="2018-03-24T17:57:15+00:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://zhenfeng-zhu.github.io/papermod-cover.png"/>

<meta name="twitter:title" content="Guiceå¿«é€Ÿå…¥é—¨"/>
<meta name="twitter:description" content="Guiceå¿«é€Ÿå…¥é—¨ æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨kotlin&#43;vert.xæ¥å†™çš„ï¼Œä½¿ç”¨gradleæ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº†guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚
guiceæ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶springä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯springå¤ªåºå¤§äº†ã€‚
1 åŸºæœ¬ä½¿ç”¨ å¼•å…¥ä¾èµ– ä½¿ç”¨gradleæˆ–è€…mavenï¼Œå¼•å…¥guiceã€‚
maven:
&lt;dependency&gt; &lt;groupId&gt;com.google.inject&lt;/groupId&gt; &lt;artifactId&gt;guice&lt;/artifactId&gt; &lt;version&gt;4.1.0&lt;/version&gt; &lt;/dependency&gt; Gradle:
compile &quot;com.google.inject:guice:4.1.0&quot; é¡¹ç›®éª¨æ¶ é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š
package com.learning.guice; public interface UserService { void process(); } package com.learning.guice; public class UserServiceImpl implements UserService { @Override public void process() { System.out.println(&quot;æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘&quot;); } } ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š
package com.learning.guice; public interface LogService { void log(String msg); } package com.learning.guice; public class LogServiceImpl implements LogService { @Override public void log(String msg) { System.out.println(&quot;------LOG: &quot; &#43; msg); } } æœ€åæ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£å’Œç›¸åº”çš„å®ç°ï¼Œåœ¨å®ç°ä¸­ä½¿ç”¨äº†ä¸šåŠ¡æ¥å£å’Œæ—¥å¿—æ¥å£å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://zhenfeng-zhu.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Guiceå¿«é€Ÿå…¥é—¨",
      "item": "https://zhenfeng-zhu.github.io/posts/guice%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Guiceå¿«é€Ÿå…¥é—¨",
  "name": "Guiceå¿«é€Ÿå…¥é—¨",
  "description": "Guiceå¿«é€Ÿå…¥é—¨ æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨kotlin+vert.xæ¥å†™çš„ï¼Œä½¿ç”¨gradleæ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº†guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚\nguiceæ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶springä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯springå¤ªåºå¤§äº†ã€‚\n1 åŸºæœ¬ä½¿ç”¨ å¼•å…¥ä¾èµ– ä½¿ç”¨gradleæˆ–è€…mavenï¼Œå¼•å…¥guiceã€‚ â€¦",
  "keywords": [
    
  ],
  "articleBody": "Guiceå¿«é€Ÿå…¥é—¨ æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨kotlin+vert.xæ¥å†™çš„ï¼Œä½¿ç”¨gradleæ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº†guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚\nguiceæ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶springä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯springå¤ªåºå¤§äº†ã€‚\n1 åŸºæœ¬ä½¿ç”¨ å¼•å…¥ä¾èµ– ä½¿ç”¨gradleæˆ–è€…mavenï¼Œå¼•å…¥guiceã€‚\nmaven:\n com.google.inject guice 4.1.0  Gradle:\ncompile \"com.google.inject:guice:4.1.0\" é¡¹ç›®éª¨æ¶ é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š\npackage com.learning.guice; public interface UserService { void process(); } package com.learning.guice; public class UserServiceImpl implements UserService { @Override public void process() { System.out.println(\"æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘\"); } } ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š\npackage com.learning.guice; public interface LogService { void log(String msg); } package com.learning.guice; public class LogServiceImpl implements LogService { @Override public void log(String msg) { System.out.println(\"------LOG: \" + msg); } } æœ€åæ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£å’Œç›¸åº”çš„å®ç°ï¼Œåœ¨å®ç°ä¸­ä½¿ç”¨äº†ä¸šåŠ¡æ¥å£å’Œæ—¥å¿—æ¥å£å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š\npackage com.learning.guice; public interface Application { void work(); } package com.learning.guice; import com.google.inject.Inject; public class MyApp implements Application { private UserService userService; private LogService logService; @Inject public MyApp(UserService userService, LogService logService) { this.userService = userService; this.logService = logService; } @Override public void work() { userService.process(); logService.log(\"ç¨‹åºæ­£å¸¸è¿è¡Œ\"); } } é…ç½®ä¾èµ–æ³¨å…¥ guiceæ˜¯ä½¿ç”¨javaä»£ç æ¥é…ç½®ä¾èµ–ã€‚ç»§æ‰¿AbstractModuleç±»ï¼Œå¹¶é‡å†™å…¶ä¸­çš„configæ–¹æ³•ã€‚åœ¨configæ–¹æ³•ä¸­ï¼Œè°ƒç”¨AbstractModuleç±»ä¸­æä¾›çš„æ–¹æ³•æ¥é…ç½®ä¾èµ–å…³ç³»ã€‚æœ€å¸¸ç”¨çš„æ˜¯bind(æ¥å£).to(å®ç°ç±»)ã€‚\npackage com.learning.guice; import com.google.inject.AbstractModule; public class MyAppModule extends AbstractModule { @Override protected void configure() { bind(LogService.class).to(LogServiceImpl.class); bind(UserService.class).to(UserServiceImpl.class); bind(Application.class).to(MyApp.class); } } å•å…ƒæµ‹è¯• guiceé…ç½®å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨Guice.createInjectoræ–¹æ³•ä¼ å…¥é…ç½®ç±»æ¥åˆ›å»ºä¸€ä¸ªæ³¨å…¥å™¨ï¼Œç„¶åä½¿ç”¨æ³¨å…¥å™¨ä¸­çš„getInstanceæ–¹æ³•è·å–ç›®æ ‡ç±»ã€‚\npackage com.learning.guice; import com.google.inject.Guice; import com.google.inject.Injector; import org.junit.BeforeClass; import org.junit.Test; public class MyAppTest { private static Injector injector; @BeforeClass public static void init(){ injector= Guice.createInjector(new MyAppModule()); } @Test public void testMyApp(){ Application application=injector.getInstance(Application.class); application.work(); } } ç¨‹åºæ‰§è¡Œç»“æœæ˜¯ï¼š\n/Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/bin/java -ea -... æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘ ------LOG: ç¨‹åºæ­£å¸¸è¿è¡Œ Process finished with exit code 0 2 åŸºæœ¬æ¦‚å¿µ 2.1 Bingdings ç»‘å®š   é“¾å¼ç»‘å®š\nåœ¨ç»‘å®šä¾èµ–çš„æ—¶å€™ä¸ä»…å¯ä»¥å°†çˆ¶ç±»å’Œå­ç±»ç»‘å®šï¼Œè¿˜å¯ä»¥å°†å­ç±»å’Œå­ç±»çš„å­ç±»è¿›è¡Œç»‘å®šã€‚\npublic class BillingModule extends AbstractModule { @Override protected void configure() { bind(TransactionLog.class).to(DatabaseTransactionLog.class); bind(DatabaseTransactionLog.class).to(MySqlDatabaseTransactionLog.class); } } åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œinjector ä¼šæŠŠæ‰€æœ‰ TransactionLog æ›¿æ¢ä¸º MySqlDatabaseTransactionLogã€‚\n  æ³¨è§£ç»‘å®š\nå½“æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªåŒä¸€ç±»å‹çš„å¯¹è±¡æ³¨å…¥ä¸åŒå¯¹è±¡çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨æ³¨è§£åŒºåˆ†è¿™äº›ä¾èµ–äº†ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨@Namedæ³¨è§£è¿›è¡ŒåŒºåˆ†ã€‚\né¦–å…ˆéœ€è¦åœ¨è¦æ³¨å…¥çš„åœ°æ–¹æ·»åŠ @Namedæ³¨è§£ã€‚\npublic class RealBillingService implements BillingService { @Inject public RealBillingService(@Named(\"Checkout\") CreditCardProcessor processor, TransactionLog transactionLog) { ... } ç„¶ååœ¨ç»‘å®šä¸­æ·»åŠ annotatedWithæ–¹æ³•æŒ‡å®š@Namedä¸­æŒ‡å®šçš„åç§°ã€‚ç”±äºç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥Guiceå®˜æ–¹å»ºè®®æˆ‘ä»¬ä¿å®ˆåœ°ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚\nbind(CreditCardProcessor.class) .annotatedWith(Names.named(\"Checkout\")) .to(CheckoutCreditCardProcessor.class);   å®ä¾‹ç»‘å®š\næœ‰æ—¶å€™éœ€è¦ç›´æ¥æ³¨å…¥ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ä»ä¾èµ–å…³ç³»ä¸­è§£æã€‚å¦‚æœæˆ‘ä»¬è¦æ³¨å…¥åŸºæœ¬ç±»å‹çš„è¯åªèƒ½è¿™ä¹ˆåšã€‚\nbind(String.class) .annotatedWith(Names.named(\"JDBC URL\")) .toInstance(\"jdbc:mysql://localhost/pizza\"); bind(Integer.class) .annotatedWith(Names.named(\"login timeout seconds\")) .toInstance(10);   @Prividesæ–¹æ³•\nå½“ä¸€ä¸ªå¯¹è±¡å¾ˆå¤æ‚ï¼Œæ— æ³•ä½¿ç”¨ç®€å•çš„æ„é€ å™¨æ¥ç”Ÿæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Providesæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯åœ¨é…ç½®ç±»ä¸­ç”Ÿæˆä¸€ä¸ªæ³¨è§£äº†@Providesçš„æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ç¼–å†™ä»»æ„ä»£ç æ¥æ„é€ å¯¹è±¡ã€‚\n@Providesæ–¹æ³•ä¹Ÿå¯ä»¥åº”ç”¨@Namedå’Œè‡ªå®šä¹‰æ³¨è§£ï¼Œè¿˜å¯ä»¥æ³¨å…¥å…¶ä»–ä¾èµ–ï¼ŒGuiceä¼šåœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰æ³¨å…¥éœ€è¦çš„å¯¹è±¡ã€‚\npublic class BillingModule extends AbstractModule { @Override protected void configure() { ... } @Provides TransactionLog provideTransactionLog() { DatabaseTransactionLog transactionLog = new DatabaseTransactionLog(); transactionLog.setJdbcUrl(\"jdbc:mysql://localhost/pizza\"); transactionLog.setThreadPoolSize(30); return transactionLog; } }   Providerç»‘å®š\nå¦‚æœé¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªæ¯”è¾ƒå¤æ‚çš„å¯¹è±¡éœ€è¦æ„å»ºï¼Œä½¿ç”¨@Provideæ–¹æ³•ä¼šè®©é…ç½®ç±»å˜å¾—æ¯”è¾ƒä¹±ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Guiceæä¾›çš„Provideræ¥å£å°†å¤æ‚çš„ä»£ç æ”¾åˆ°å•ç‹¬çš„ç±»ä¸­ã€‚åŠæ³•å¾ˆç®€å•ï¼Œå®ç°Provideræ¥å£çš„getæ–¹æ³•å³å¯ã€‚åœ¨Providerç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Injectä»»æ„æ³¨å…¥å¯¹è±¡ã€‚\npublic class DatabaseTransactionLogProvider implements Provider { private final Connection connection; @Inject public DatabaseTransactionLogProvider(Connection connection) { this.connection = connection; } public TransactionLog get() { DatabaseTransactionLog transactionLog = new DatabaseTransactionLog(); transactionLog.setConnection(connection); return transactionLog; } } ç„¶ååœ¨configæ–¹æ³•ä¸­ï¼Œè°ƒç”¨.toProvideræ–¹æ³•ï¼š\npublic class BillingModule extends AbstractModule { @Override protected void configure() { bind(TransactionLog.class) .toProvider(DatabaseTransactionLogProvider.class); } }   æ— ç›®æ ‡ç»‘å®š\næ— ç›®æ ‡ç»‘å®šæ²¡æœ‰toå­å¥\n  æ„é€ å™¨ç»‘å®š\næŸäº›åœºæ™¯ä¸‹ï¼Œä½ èƒ½éœ€è¦æŠŠæŸä¸ªç±»å‹ç»‘å®šåˆ°ä»»æ„ä¸€ä¸ªæ„é€ å‡½æ•°ä¸Šã€‚ä»¥ä¸‹æƒ…å†µä¼šæœ‰è¿™ç§éœ€æ±‚ï¼š1ã€ @Inject æ³¨è§£æ— æ³•è¢«åº”ç”¨åˆ°ç›®æ ‡æ„é€ å‡½æ•°ï¼›2ã€ç›®æ ‡ç±»æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»ï¼›3ã€ç›®æ ‡ç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°å‚ä¸DIã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œguice æä¾›äº† toConstructor()ç»‘å®š ï¼Œå®ƒéœ€è¦ä½ æŒ‡å®šè¦ä½¿ç”¨çš„ç¡®åˆ‡çš„æŸä¸ªç›®æ ‡æ„é€ å‡½æ•°ï¼Œå¹¶å¤„ç† â€œconstructor annot be foundâ€ å¼‚å¸¸ï¼š\npublic class BillingModule extends AbstractModule { @Override protected void configure() { try { bind(TransactionLog.class).toConstructor( DatabaseTransactionLog.class.getConstructor(DatabaseConnection.class)); } catch (NoSuchMethodException e) { addError(e); } } }   å†…ç½®ç»‘å®š\né™¤äº†æ˜¾ç¤ºç»‘å®šå’Œå³æ—¶ç»‘å®š just-in-time bindingsï¼Œå‰©ä¸‹çš„ç»‘å®šéƒ½å±äºinjectorçš„å†…ç½®ç»‘å®šã€‚è¿™äº›ç»‘å®šåªèƒ½ç”±injectorè‡ªå·±åˆ›å»ºï¼Œä¸å…è®¸å¤–éƒ¨è°ƒç”¨ã€‚\n  å³æ—¶ç»‘å®š\nå½“ injector éœ€è¦æŸä¸€ä¸ªç±»å‹çš„å®ä¾‹çš„æ—¶å€™ï¼Œå®ƒéœ€è¦è·å–ä¸€ä¸ªç»‘å®šã€‚åœ¨Moduleç±»ä¸­çš„ç»‘å®šå«åšæ˜¾å¼ç»‘å®šï¼Œåªè¦ä»–ä»¬å¯ç”¨ï¼Œinjector å°±ä¼šåœ¨ä»»ä½•æ—¶å€™ä½¿ç”¨å®ƒä»¬ã€‚å¦‚æœéœ€è¦æŸä¸€ç±»å‹çš„å®ä¾‹ï¼Œä½†æ˜¯åˆæ²¡æœ‰æ˜¾å¼ç»‘å®šï¼Œé‚£ä¹ˆinjectorå°†ä¼šè¯•å›¾åˆ›å»ºä¸€ä¸ªå³æ—¶ç»‘å®šï¼ˆJust-in-time Bindingsï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºJITç»‘å®š æˆ– éšå¼ç»‘å®šã€‚\n  2.2 ä½œç”¨åŸŸ é»˜è®¤æƒ…å†µä¸‹Guiceä¼šåœ¨æ¯æ¬¡æ³¨å…¥çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚å¦‚æœå¸Œæœ›åˆ›å»ºä¸€ä¸ªå•ä¾‹ä¾èµ–çš„è¯ï¼Œå¯ä»¥åœ¨å®ç°ç±»ä¸Šåº”ç”¨@Singletonæ³¨è§£ã€‚\n@Singleton public class InMemoryTransactionLog implements TransactionLog { /* everything here should be threadsafe! */ } æˆ–è€…ä¹Ÿå¯ä»¥åœ¨é…ç½®ç±»ä¸­æŒ‡å®šã€‚\nbind(TransactionLog.class).to(InMemoryTransactionLog.class).in(Singleton.class); åœ¨@Providesæ–¹æ³•ä¸­ä¹Ÿå¯ä»¥æŒ‡å®šå•ä¾‹ã€‚\n@Provides @Singleton TransactionLog provideTransactionLog() { ... } å¦‚æœä¸€ä¸ªç±»å‹ä¸Šå­˜åœ¨å¤šä¸ªå†²çªçš„ä½œç”¨åŸŸï¼ŒGuiceä¼šä½¿ç”¨bind()æ–¹æ³•ä¸­æŒ‡å®šçš„ä½œç”¨åŸŸã€‚å¦‚æœä¸æƒ³ä½¿ç”¨æ³¨è§£çš„ä½œç”¨åŸŸï¼Œå¯ä»¥åœ¨bind()æ–¹æ³•ä¸­å°†å¯¹è±¡ç»‘å®šä¸ºScopes.NO_SCOPEã€‚\nGuiceå’Œå®ƒçš„æ‰©å±•æä¾›äº†å¾ˆå¤šä½œç”¨åŸŸï¼Œå’Œspringä¸€æ ·ï¼Œæœ‰å•ä¾‹Singletonï¼ŒSessionä½œç”¨åŸŸSessionScopedï¼ŒRequestè¯·æ±‚ä½œç”¨åŸŸRequestScopedç­‰ç­‰ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸã€‚\n2.3 æ³¨å…¥ guiceçš„æ³¨å…¥å’Œspringç±»ä¼¼ï¼Œè€Œä¸”è¿˜åšäº†ä¸€äº›æ‰©å±•ã€‚\n  æ„é€ å™¨æ³¨å…¥\nä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°ç±»çš„æ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªæ„é€ æ–¹æ³•éœ€è¦æ¥å—ç±»ä¾èµ–ä½œä¸ºå‚æ•°ã€‚å¤§å¤šæ•°æ„é€ å­å°†ä¼šæŠŠæ¥æ”¶åˆ°çš„å‚æ•°åˆ†æ´¾ç»™å†…éƒ¨æˆå‘˜å˜é‡ã€‚\n  æ–¹æ³•æ³¨å…¥\nGuice å¯ä»¥å‘æ ‡æ³¨äº† @Inject çš„æ–¹æ³•ä¸­æ³¨å…¥ä¾èµ–ã€‚ä¾èµ–é¡¹ä»¥å‚æ•°çš„å½¢å¼ä¼ ç»™æ–¹æ³•ï¼ŒGuice ä¼šåœ¨è°ƒç”¨æ³¨å…¥æ–¹æ³•å‰å®Œæˆä¾èµ–é¡¹çš„æ„å»ºã€‚æ³¨å…¥æ–¹æ³•å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”æ–¹æ³•åå¯¹æ³¨å…¥æ“ä½œä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚\n  å­—æ®µæ³¨å…¥\nä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°å­—æ®µã€‚è¿™æ˜¯æœ€ç®€æ´çš„æ³¨å…¥æ–¹å¼ã€‚\næ³¨æ„ï¼šä¸èƒ½ç»™finalå­—æ®µåŠ @Injectæ³¨è§£ã€‚\n  å¯é€‰æ³¨å…¥\næœ‰çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªä¾èµ–é¡¹å­˜åœ¨åˆ™è¿›è¡Œæ³¨å…¥ï¼Œä¸å­˜åœ¨åˆ™ä¸æ³¨å…¥ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨æ–¹æ³•æ³¨å…¥æˆ–å­—æ®µæ³¨å…¥æ¥åšè¿™ä»¶äº‹ï¼Œå½“ä¾èµ–é¡¹ä¸å¯ç”¨çš„æ—¶å€™Guice å°±ä¼šå¿½ç•¥è¿™äº›æ³¨å…¥ã€‚å¦‚æœä½ éœ€è¦é…ç½®å¯é€‰æ³¨å…¥çš„è¯ï¼Œä½¿ç”¨ @Inject(optional = true) æ³¨è§£å°±å¯ä»¥äº†ã€‚\n  æŒ‰éœ€æ³¨å…¥\næ–¹æ³•æ³¨å…¥å’Œå­—æ®µæ³¨å…¥å¯ä»¥å¯ä»¥ç”¨æ¥åˆå§‹åŒ–ç°æœ‰å®ä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ Injector.injectMembersã€‚\nè¿™ä¸ªä¸å¸¸ç”¨ã€‚\n  é™æ€æ³¨å…¥\nä¸å»ºè®®ä½¿ç”¨é™æ€æ³¨å…¥ã€‚\n  è‡ªåŠ¨æ³¨å…¥\nGuice ä¼šå¯¹ä»¥ä¸‹æƒ…å½¢åšè‡ªåŠ¨æ³¨å…¥ï¼š\n åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toInstance() æ³¨å…¥å®ä¾‹ã€‚ åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toProvider() æ³¨å…¥ Provider å®ä¾‹ã€‚è¿™äº›å¯¹è±¡ä¼šåœ¨æ³¨å…¥å™¨åˆ›å»ºçš„æ—¶å€™è¢«åˆ›å»ºå¹¶æ³¨å…¥å®¹å™¨ã€‚å¦‚æœå®ƒä»¬éœ€è¦æ»¡è¶³å…¶ä»–å¯åŠ¨æ³¨å…¥ï¼ŒGuice ä¼šåœ¨å®ƒä»¬è¢«ä½¿ç”¨å‰å°†ä»–ä»¬æ³¨å…¥è¿›å»ã€‚    2.4 AOP guiceçš„aopåŠŸèƒ½è¾ƒå¼±ï¼Œæ—¶é—´åŸå› è¿˜æ²¡ç ”ç©¶é€ï¼Œåç»­ç»§ç»­å†™ã€‚\n",
  "wordCount" : "466",
  "inLanguage": "en",
  "datePublished": "2018-03-24T17:57:15Z",
  "dateModified": "2018-03-24T17:57:15Z",
  "author":{
    "@type": "Person",
    "name": "Lucas"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://zhenfeng-zhu.github.io/posts/guice%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Go Data",
    "logo": {
      "@type": "ImageObject",
      "url": "https://zhenfeng-zhu.github.io/favicon.ico"
    }
  }
}
</script>





</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://zhenfeng-zhu.github.io" accesskey="h" title="Go Data (Alt + H)">Go Data</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                
                
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://zhenfeng-zhu.github.io/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://zhenfeng-zhu.github.io/search/" title="ğŸ”">
                    <span>ğŸ”</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
<div class="breadcrumbs">

    <a href="https://zhenfeng-zhu.github.io">Home</a>&nbsp;Â»&nbsp;<a href="https://zhenfeng-zhu.github.io/posts/">Posts</a>
</div>

    <h1 class="post-title">
      Guiceå¿«é€Ÿå…¥é—¨
    </h1>
    <div class="post-meta">

March 24, 2018&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Lucas

</div>
  </header> 

  <div class="post-content">
<h1 id="guiceå¿«é€Ÿå…¥é—¨">Guiceå¿«é€Ÿå…¥é—¨<a hidden class="anchor" aria-hidden="true" href="#guiceå¿«é€Ÿå…¥é—¨">#</a></h1>
<p>æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨kotlin+vert.xæ¥å†™çš„ï¼Œä½¿ç”¨gradleæ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº†guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚</p>
<p>guiceæ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶springä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯springå¤ªåºå¤§äº†ã€‚</p>
<h2 id="1-åŸºæœ¬ä½¿ç”¨">1 åŸºæœ¬ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#1-åŸºæœ¬ä½¿ç”¨">#</a></h2>
<h3 id="å¼•å…¥ä¾èµ–">å¼•å…¥ä¾èµ–<a hidden class="anchor" aria-hidden="true" href="#å¼•å…¥ä¾èµ–">#</a></h3>
<p>ä½¿ç”¨gradleæˆ–è€…mavenï¼Œå¼•å…¥guiceã€‚</p>
<p>maven:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.google.inject&lt;/groupId&gt;
    &lt;artifactId&gt;guice&lt;/artifactId&gt;
    &lt;version&gt;4.1.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>Gradle:</p>
<pre><code>compile &quot;com.google.inject:guice:4.1.0&quot;
</code></pre><h3 id="é¡¹ç›®éª¨æ¶">é¡¹ç›®éª¨æ¶<a hidden class="anchor" aria-hidden="true" href="#é¡¹ç›®éª¨æ¶">#</a></h3>
<p>é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š</p>
<pre><code>package com.learning.guice;
public interface UserService {
    void process();
}


package com.learning.guice;
public class UserServiceImpl implements UserService {
    @Override
    public void process() {
        System.out.println(&quot;æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘&quot;);
    }
}
</code></pre><p>ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š</p>
<pre><code>package com.learning.guice;
public interface LogService {
    void log(String msg);
}

package com.learning.guice;
public class LogServiceImpl implements LogService {
    @Override
    public void log(String msg) {
        System.out.println(&quot;------LOG: &quot; + msg);
    }
}
</code></pre><p>æœ€åæ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£å’Œç›¸åº”çš„å®ç°ï¼Œåœ¨å®ç°ä¸­ä½¿ç”¨äº†ä¸šåŠ¡æ¥å£å’Œæ—¥å¿—æ¥å£å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š</p>
<pre><code>package com.learning.guice;
public interface Application {
    void work();
}


package com.learning.guice;
import com.google.inject.Inject;
public class MyApp implements Application {
    private UserService userService;
    private LogService logService;

    @Inject
    public MyApp(UserService userService, LogService logService) {
        this.userService = userService;
        this.logService = logService;
    }

    @Override
    public void work() {
        userService.process();
        logService.log(&quot;ç¨‹åºæ­£å¸¸è¿è¡Œ&quot;);
    }
}
</code></pre><h3 id="é…ç½®ä¾èµ–æ³¨å…¥">é…ç½®ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#é…ç½®ä¾èµ–æ³¨å…¥">#</a></h3>
<p>guiceæ˜¯ä½¿ç”¨javaä»£ç æ¥é…ç½®ä¾èµ–ã€‚ç»§æ‰¿AbstractModuleç±»ï¼Œå¹¶é‡å†™å…¶ä¸­çš„configæ–¹æ³•ã€‚åœ¨configæ–¹æ³•ä¸­ï¼Œè°ƒç”¨AbstractModuleç±»ä¸­æä¾›çš„æ–¹æ³•æ¥é…ç½®ä¾èµ–å…³ç³»ã€‚æœ€å¸¸ç”¨çš„æ˜¯bind(æ¥å£).to(å®ç°ç±»)ã€‚</p>
<pre><code>package com.learning.guice;

import com.google.inject.AbstractModule;

public class MyAppModule extends AbstractModule {

    @Override
    protected void configure() {
        bind(LogService.class).to(LogServiceImpl.class);
        bind(UserService.class).to(UserServiceImpl.class);
        bind(Application.class).to(MyApp.class);
    }
}
</code></pre><h3 id="å•å…ƒæµ‹è¯•">å•å…ƒæµ‹è¯•<a hidden class="anchor" aria-hidden="true" href="#å•å…ƒæµ‹è¯•">#</a></h3>
<p>guiceé…ç½®å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨Guice.createInjectoræ–¹æ³•ä¼ å…¥é…ç½®ç±»æ¥åˆ›å»ºä¸€ä¸ªæ³¨å…¥å™¨ï¼Œç„¶åä½¿ç”¨æ³¨å…¥å™¨ä¸­çš„getInstanceæ–¹æ³•è·å–ç›®æ ‡ç±»ã€‚</p>
<pre><code>package com.learning.guice;

import com.google.inject.Guice;
import com.google.inject.Injector;
import org.junit.BeforeClass;
import org.junit.Test;

public class MyAppTest {
    private static Injector injector;

    @BeforeClass
    public static void init(){
        injector= Guice.createInjector(new MyAppModule());
    }

    @Test
    public void testMyApp(){
        Application application=injector.getInstance(Application.class);
        application.work();
    }
}
</code></pre><p>ç¨‹åºæ‰§è¡Œç»“æœæ˜¯ï¼š</p>
<pre><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/bin/java -ea -...
æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘
------LOG: ç¨‹åºæ­£å¸¸è¿è¡Œ

Process finished with exit code 0
</code></pre><h2 id="2-åŸºæœ¬æ¦‚å¿µ">2 åŸºæœ¬æ¦‚å¿µ<a hidden class="anchor" aria-hidden="true" href="#2-åŸºæœ¬æ¦‚å¿µ">#</a></h2>
<h3 id="21-bingdings-ç»‘å®š">2.1 Bingdings ç»‘å®š<a hidden class="anchor" aria-hidden="true" href="#21-bingdings-ç»‘å®š">#</a></h3>
<ul>
<li>
<p>é“¾å¼ç»‘å®š</p>
<p>åœ¨ç»‘å®šä¾èµ–çš„æ—¶å€™ä¸ä»…å¯ä»¥å°†çˆ¶ç±»å’Œå­ç±»ç»‘å®šï¼Œè¿˜å¯ä»¥å°†å­ç±»å’Œå­ç±»çš„å­ç±»è¿›è¡Œç»‘å®šã€‚</p>
<pre><code>public class BillingModule extends AbstractModule {
  @Override 
  protected void configure() {
    bind(TransactionLog.class).to(DatabaseTransactionLog.class);
    bind(DatabaseTransactionLog.class).to(MySqlDatabaseTransactionLog.class);
  }
}
</code></pre><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œinjector ä¼šæŠŠæ‰€æœ‰ TransactionLog æ›¿æ¢ä¸º MySqlDatabaseTransactionLogã€‚</p>
</li>
<li>
<p>æ³¨è§£ç»‘å®š</p>
<p>å½“æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªåŒä¸€ç±»å‹çš„å¯¹è±¡æ³¨å…¥ä¸åŒå¯¹è±¡çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨æ³¨è§£åŒºåˆ†è¿™äº›ä¾èµ–äº†ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨@Namedæ³¨è§£è¿›è¡ŒåŒºåˆ†ã€‚</p>
<p>é¦–å…ˆéœ€è¦åœ¨è¦æ³¨å…¥çš„åœ°æ–¹æ·»åŠ @Namedæ³¨è§£ã€‚</p>
<pre><code>public class RealBillingService implements BillingService {

  @Inject
  public RealBillingService(@Named(&quot;Checkout&quot;) CreditCardProcessor processor,
      TransactionLog transactionLog) {
    ...
  }
</code></pre><p>ç„¶ååœ¨ç»‘å®šä¸­æ·»åŠ annotatedWithæ–¹æ³•æŒ‡å®š@Namedä¸­æŒ‡å®šçš„åç§°ã€‚ç”±äºç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥Guiceå®˜æ–¹å»ºè®®æˆ‘ä»¬ä¿å®ˆåœ°ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<pre><code>bind(CreditCardProcessor.class)
        .annotatedWith(Names.named(&quot;Checkout&quot;))
        .to(CheckoutCreditCardProcessor.class);
</code></pre></li>
<li>
<p>å®ä¾‹ç»‘å®š</p>
<p>æœ‰æ—¶å€™éœ€è¦ç›´æ¥æ³¨å…¥ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ä»ä¾èµ–å…³ç³»ä¸­è§£æã€‚å¦‚æœæˆ‘ä»¬è¦æ³¨å…¥åŸºæœ¬ç±»å‹çš„è¯åªèƒ½è¿™ä¹ˆåšã€‚</p>
<pre><code>bind(String.class)
        .annotatedWith(Names.named(&quot;JDBC URL&quot;))
        .toInstance(&quot;jdbc:mysql://localhost/pizza&quot;);
bind(Integer.class)
        .annotatedWith(Names.named(&quot;login timeout seconds&quot;))
        .toInstance(10);
</code></pre></li>
<li>
<p>@Prividesæ–¹æ³•</p>
<p>å½“ä¸€ä¸ªå¯¹è±¡å¾ˆå¤æ‚ï¼Œæ— æ³•ä½¿ç”¨ç®€å•çš„æ„é€ å™¨æ¥ç”Ÿæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Providesæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯åœ¨é…ç½®ç±»ä¸­ç”Ÿæˆä¸€ä¸ªæ³¨è§£äº†@Providesçš„æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ç¼–å†™ä»»æ„ä»£ç æ¥æ„é€ å¯¹è±¡ã€‚</p>
<p>@Providesæ–¹æ³•ä¹Ÿå¯ä»¥åº”ç”¨@Namedå’Œè‡ªå®šä¹‰æ³¨è§£ï¼Œè¿˜å¯ä»¥æ³¨å…¥å…¶ä»–ä¾èµ–ï¼ŒGuiceä¼šåœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰æ³¨å…¥éœ€è¦çš„å¯¹è±¡ã€‚</p>
<pre><code>public class BillingModule extends AbstractModule {
  @Override
  protected void configure() {
    ...
  }

  @Provides
  TransactionLog provideTransactionLog() {
    DatabaseTransactionLog transactionLog = new DatabaseTransactionLog();
    transactionLog.setJdbcUrl(&quot;jdbc:mysql://localhost/pizza&quot;);
    transactionLog.setThreadPoolSize(30);
    return transactionLog;
  }
}
</code></pre></li>
<li>
<p>Providerç»‘å®š</p>
<p>å¦‚æœé¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªæ¯”è¾ƒå¤æ‚çš„å¯¹è±¡éœ€è¦æ„å»ºï¼Œä½¿ç”¨@Provideæ–¹æ³•ä¼šè®©é…ç½®ç±»å˜å¾—æ¯”è¾ƒä¹±ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Guiceæä¾›çš„Provideræ¥å£å°†å¤æ‚çš„ä»£ç æ”¾åˆ°å•ç‹¬çš„ç±»ä¸­ã€‚åŠæ³•å¾ˆç®€å•ï¼Œå®ç°Provider<!-- raw HTML omitted -->æ¥å£çš„getæ–¹æ³•å³å¯ã€‚åœ¨Providerç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Injectä»»æ„æ³¨å…¥å¯¹è±¡ã€‚</p>
<pre><code>public class DatabaseTransactionLogProvider implements Provider&lt;TransactionLog&gt; {
  private final Connection connection;

  @Inject
  public DatabaseTransactionLogProvider(Connection connection) {
    this.connection = connection;
  }

  public TransactionLog get() {
    DatabaseTransactionLog transactionLog = new DatabaseTransactionLog();
    transactionLog.setConnection(connection);
    return transactionLog;
  }
}
</code></pre><p>ç„¶ååœ¨configæ–¹æ³•ä¸­ï¼Œè°ƒç”¨.toProvideræ–¹æ³•ï¼š</p>
<pre><code>public class BillingModule extends AbstractModule {
  @Override
  protected void configure() {
    bind(TransactionLog.class)
        .toProvider(DatabaseTransactionLogProvider.class);
  }
}
</code></pre></li>
<li>
<p>æ— ç›®æ ‡ç»‘å®š</p>
<p>æ— ç›®æ ‡ç»‘å®šæ²¡æœ‰toå­å¥</p>
</li>
<li>
<p>æ„é€ å™¨ç»‘å®š</p>
<p>æŸäº›åœºæ™¯ä¸‹ï¼Œä½ èƒ½éœ€è¦æŠŠæŸä¸ªç±»å‹ç»‘å®šåˆ°ä»»æ„ä¸€ä¸ªæ„é€ å‡½æ•°ä¸Šã€‚ä»¥ä¸‹æƒ…å†µä¼šæœ‰è¿™ç§éœ€æ±‚ï¼š1ã€ @Inject æ³¨è§£æ— æ³•è¢«åº”ç”¨åˆ°ç›®æ ‡æ„é€ å‡½æ•°ï¼›2ã€ç›®æ ‡ç±»æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»ï¼›3ã€ç›®æ ‡ç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°å‚ä¸DIã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œguice æä¾›äº† toConstructor()ç»‘å®š ï¼Œå®ƒéœ€è¦ä½ æŒ‡å®šè¦ä½¿ç”¨çš„ç¡®åˆ‡çš„æŸä¸ªç›®æ ‡æ„é€ å‡½æ•°ï¼Œå¹¶å¤„ç† &ldquo;constructor annot be found&rdquo; å¼‚å¸¸ï¼š</p>
<pre><code>public class BillingModule extends AbstractModule {
  @Override 
  protected void configure() {
    try {
      bind(TransactionLog.class).toConstructor(
          DatabaseTransactionLog.class.getConstructor(DatabaseConnection.class));
    } catch (NoSuchMethodException e) {
      addError(e);
    }
  }
}
</code></pre></li>
<li>
<p>å†…ç½®ç»‘å®š</p>
<p>é™¤äº†æ˜¾ç¤ºç»‘å®šå’Œå³æ—¶ç»‘å®š just-in-time bindingsï¼Œå‰©ä¸‹çš„ç»‘å®šéƒ½å±äºinjectorçš„å†…ç½®ç»‘å®šã€‚è¿™äº›ç»‘å®šåªèƒ½ç”±injectorè‡ªå·±åˆ›å»ºï¼Œä¸å…è®¸å¤–éƒ¨è°ƒç”¨ã€‚</p>
</li>
<li>
<p>å³æ—¶ç»‘å®š</p>
<p>å½“ injector éœ€è¦æŸä¸€ä¸ªç±»å‹çš„å®ä¾‹çš„æ—¶å€™ï¼Œå®ƒéœ€è¦è·å–ä¸€ä¸ªç»‘å®šã€‚åœ¨Moduleç±»ä¸­çš„ç»‘å®šå«åšæ˜¾å¼ç»‘å®šï¼Œåªè¦ä»–ä»¬å¯ç”¨ï¼Œinjector å°±ä¼šåœ¨ä»»ä½•æ—¶å€™ä½¿ç”¨å®ƒä»¬ã€‚å¦‚æœéœ€è¦æŸä¸€ç±»å‹çš„å®ä¾‹ï¼Œä½†æ˜¯åˆæ²¡æœ‰æ˜¾å¼ç»‘å®šï¼Œé‚£ä¹ˆinjectorå°†ä¼šè¯•å›¾åˆ›å»ºä¸€ä¸ªå³æ—¶ç»‘å®šï¼ˆJust-in-time Bindingsï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºJITç»‘å®š æˆ– éšå¼ç»‘å®šã€‚</p>
</li>
</ul>
<h3 id="22-ä½œç”¨åŸŸ">2.2 ä½œç”¨åŸŸ<a hidden class="anchor" aria-hidden="true" href="#22-ä½œç”¨åŸŸ">#</a></h3>
<p>é»˜è®¤æƒ…å†µä¸‹Guiceä¼šåœ¨æ¯æ¬¡æ³¨å…¥çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚å¦‚æœå¸Œæœ›åˆ›å»ºä¸€ä¸ªå•ä¾‹ä¾èµ–çš„è¯ï¼Œå¯ä»¥åœ¨å®ç°ç±»ä¸Šåº”ç”¨@Singletonæ³¨è§£ã€‚</p>
<pre><code>@Singleton
public class InMemoryTransactionLog implements TransactionLog {
  /* everything here should be threadsafe! */
}
</code></pre><p>æˆ–è€…ä¹Ÿå¯ä»¥åœ¨é…ç½®ç±»ä¸­æŒ‡å®šã€‚</p>
<pre><code>bind(TransactionLog.class).to(InMemoryTransactionLog.class).in(Singleton.class);
</code></pre><p>åœ¨<code>@Provides</code>æ–¹æ³•ä¸­ä¹Ÿå¯ä»¥æŒ‡å®šå•ä¾‹ã€‚</p>
<pre><code>@Provides @Singleton
  TransactionLog provideTransactionLog() {
    ...
  }
</code></pre><p>å¦‚æœä¸€ä¸ªç±»å‹ä¸Šå­˜åœ¨å¤šä¸ªå†²çªçš„ä½œç”¨åŸŸï¼ŒGuiceä¼šä½¿ç”¨bind()æ–¹æ³•ä¸­æŒ‡å®šçš„ä½œç”¨åŸŸã€‚å¦‚æœä¸æƒ³ä½¿ç”¨æ³¨è§£çš„ä½œç”¨åŸŸï¼Œå¯ä»¥åœ¨bind()æ–¹æ³•ä¸­å°†å¯¹è±¡ç»‘å®šä¸ºScopes.NO_SCOPEã€‚</p>
<p>Guiceå’Œå®ƒçš„æ‰©å±•æä¾›äº†å¾ˆå¤šä½œç”¨åŸŸï¼Œå’Œspringä¸€æ ·ï¼Œæœ‰å•ä¾‹Singletonï¼ŒSessionä½œç”¨åŸŸSessionScopedï¼ŒRequestè¯·æ±‚ä½œç”¨åŸŸRequestScopedç­‰ç­‰ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸã€‚</p>
<h3 id="23-æ³¨å…¥">2.3 æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#23-æ³¨å…¥">#</a></h3>
<p>guiceçš„æ³¨å…¥å’Œspringç±»ä¼¼ï¼Œè€Œä¸”è¿˜åšäº†ä¸€äº›æ‰©å±•ã€‚</p>
<ul>
<li>
<p>æ„é€ å™¨æ³¨å…¥</p>
<p>ä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°ç±»çš„æ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªæ„é€ æ–¹æ³•éœ€è¦æ¥å—ç±»ä¾èµ–ä½œä¸ºå‚æ•°ã€‚å¤§å¤šæ•°æ„é€ å­å°†ä¼šæŠŠæ¥æ”¶åˆ°çš„å‚æ•°åˆ†æ´¾ç»™å†…éƒ¨æˆå‘˜å˜é‡ã€‚</p>
</li>
<li>
<p>æ–¹æ³•æ³¨å…¥</p>
<p>Guice å¯ä»¥å‘æ ‡æ³¨äº† @Inject çš„æ–¹æ³•ä¸­æ³¨å…¥ä¾èµ–ã€‚ä¾èµ–é¡¹ä»¥å‚æ•°çš„å½¢å¼ä¼ ç»™æ–¹æ³•ï¼ŒGuice ä¼šåœ¨è°ƒç”¨æ³¨å…¥æ–¹æ³•å‰å®Œæˆä¾èµ–é¡¹çš„æ„å»ºã€‚æ³¨å…¥æ–¹æ³•å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”æ–¹æ³•åå¯¹æ³¨å…¥æ“ä½œä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚</p>
</li>
<li>
<p>å­—æ®µæ³¨å…¥</p>
<p>ä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°å­—æ®µã€‚è¿™æ˜¯æœ€ç®€æ´çš„æ³¨å…¥æ–¹å¼ã€‚</p>
<p>æ³¨æ„ï¼šä¸èƒ½ç»™finalå­—æ®µåŠ @Injectæ³¨è§£ã€‚</p>
</li>
<li>
<p>å¯é€‰æ³¨å…¥</p>
<p>æœ‰çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªä¾èµ–é¡¹å­˜åœ¨åˆ™è¿›è¡Œæ³¨å…¥ï¼Œä¸å­˜åœ¨åˆ™ä¸æ³¨å…¥ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨æ–¹æ³•æ³¨å…¥æˆ–å­—æ®µæ³¨å…¥æ¥åšè¿™ä»¶äº‹ï¼Œå½“ä¾èµ–é¡¹ä¸å¯ç”¨çš„æ—¶å€™Guice å°±ä¼šå¿½ç•¥è¿™äº›æ³¨å…¥ã€‚å¦‚æœä½ éœ€è¦é…ç½®å¯é€‰æ³¨å…¥çš„è¯ï¼Œä½¿ç”¨ @Inject(optional = true) æ³¨è§£å°±å¯ä»¥äº†ã€‚</p>
</li>
<li>
<p>æŒ‰éœ€æ³¨å…¥</p>
<p>æ–¹æ³•æ³¨å…¥å’Œå­—æ®µæ³¨å…¥å¯ä»¥å¯ä»¥ç”¨æ¥åˆå§‹åŒ–ç°æœ‰å®ä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ Injector.injectMembersã€‚</p>
<p>è¿™ä¸ªä¸å¸¸ç”¨ã€‚</p>
</li>
<li>
<p>é™æ€æ³¨å…¥</p>
<p>ä¸å»ºè®®ä½¿ç”¨é™æ€æ³¨å…¥ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨æ³¨å…¥</p>
<p>Guice ä¼šå¯¹ä»¥ä¸‹æƒ…å½¢åšè‡ªåŠ¨æ³¨å…¥ï¼š</p>
<ul>
<li>åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toInstance() æ³¨å…¥å®ä¾‹ã€‚</li>
<li>åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toProvider() æ³¨å…¥ Provider å®ä¾‹ã€‚è¿™äº›å¯¹è±¡ä¼šåœ¨æ³¨å…¥å™¨åˆ›å»ºçš„æ—¶å€™è¢«åˆ›å»ºå¹¶æ³¨å…¥å®¹å™¨ã€‚å¦‚æœå®ƒä»¬éœ€è¦æ»¡è¶³å…¶ä»–å¯åŠ¨æ³¨å…¥ï¼ŒGuice ä¼šåœ¨å®ƒä»¬è¢«ä½¿ç”¨å‰å°†ä»–ä»¬æ³¨å…¥è¿›å»ã€‚</li>
</ul>
</li>
</ul>
<h3 id="24-aop">2.4 AOP<a hidden class="anchor" aria-hidden="true" href="#24-aop">#</a></h3>
<p>guiceçš„aopåŠŸèƒ½è¾ƒå¼±ï¼Œæ—¶é—´åŸå› è¿˜æ²¡ç ”ç©¶é€ï¼Œåç»­ç»§ç»­å†™ã€‚</p>

</div>
  <footer class="post-footer">
    <nav class="paginav">
      <a class="prev" href="https://zhenfeng-zhu.github.io/posts/reactive%E5%BE%AE%E6%9C%8D%E5%8A%A1/">
        <span class="title">Â« Prev Page</span>
        <br>
        <span>Reactiveå¾®æœåŠ¡</span>
      </a>
      <a class="next" href="https://zhenfeng-zhu.github.io/posts/kotlin%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/">
        <span class="title">Next Page Â»</span>
        <br>
        <span>kotlinå¿«é€Ÿå…¥é—¨</span>
      </a>
    </nav>



<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Guiceå¿«é€Ÿå…¥é—¨ on twitter"
        href="https://twitter.com/intent/tweet/?text=Guice%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8&amp;url=https%3a%2f%2fzhenfeng-zhu.github.io%2fposts%2fguice%25E5%25BF%25AB%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Guiceå¿«é€Ÿå…¥é—¨ on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fzhenfeng-zhu.github.io%2fposts%2fguice%25E5%25BF%25AB%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f&amp;title=Guice%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8&amp;summary=Guice%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8&amp;source=https%3a%2f%2fzhenfeng-zhu.github.io%2fposts%2fguice%25E5%25BF%25AB%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Guiceå¿«é€Ÿå…¥é—¨ on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fzhenfeng-zhu.github.io%2fposts%2fguice%25E5%25BF%25AB%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f&title=Guice%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Guiceå¿«é€Ÿå…¥é—¨ on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fzhenfeng-zhu.github.io%2fposts%2fguice%25E5%25BF%25AB%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Guiceå¿«é€Ÿå…¥é—¨ on whatsapp"
        href="https://api.whatsapp.com/send?text=Guice%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8%20-%20https%3a%2f%2fzhenfeng-zhu.github.io%2fposts%2fguice%25E5%25BF%25AB%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Guiceå¿«é€Ÿå…¥é—¨ on telegram"
        href="https://telegram.me/share/url?text=Guice%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8&amp;url=https%3a%2f%2fzhenfeng-zhu.github.io%2fposts%2fguice%25E5%25BF%25AB%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main><footer class="footer">
    <span>&copy; 2021 <a href="https://zhenfeng-zhu.github.io">Go Data</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script defer src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
